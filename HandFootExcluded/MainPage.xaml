<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HandFootExcluded.MainPage">

    <Grid Padding="3" HorizontalOptions="Fill" VerticalOptions="Fill">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <VerticalStackLayout Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
            <VerticalStackLayout.Style>
                <Style TargetType="VerticalStackLayout">
                    <Setter Property="IsVisible" Value="True" />
                    <Style.Triggers>
                        <DataTrigger TargetType="VerticalStackLayout" Binding="{Binding HasGameStarted}" Value="True">
                            <Setter Property="IsVisible" Value="False" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </VerticalStackLayout.Style>
            <HorizontalStackLayout>
                <Label Text="Player 1:" VerticalOptions="Center" Margin="3,0" />
                <Entry Placeholder="Enter Player 1:" Keyboard="Text" HorizontalOptions="Fill" Text="{Binding DefaultPlayer1, Mode=TwoWay}" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Player 2:" VerticalOptions="Center" Margin="3,0" />
                <Entry Placeholder="Enter Player 2:" Keyboard="Text" HorizontalOptions="Fill" Text="{Binding DefaultPlayer2, Mode=TwoWay}" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Player 3:" VerticalOptions="Center" Margin="3,0" />
                <Entry Placeholder="Enter Player 3:" Keyboard="Text" HorizontalOptions="Fill" Text="{Binding DefaultPlayer3, Mode=TwoWay}" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Player 4:" VerticalOptions="Center" Margin="3,0" />
                <Entry Placeholder="Enter Player 4:" Keyboard="Text" HorizontalOptions="Fill" Text="{Binding DefaultPlayer4, Mode=TwoWay}" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Player 5:" VerticalOptions="Center" Margin="3,0" />
                <Entry Placeholder="Enter Player 5:" Keyboard="Text" HorizontalOptions="Fill" Text="{Binding DefaultPlayer5, Mode=TwoWay}" />
            </HorizontalStackLayout>

            <Button Text="Start" HorizontalOptions="Center" Command="{Binding StartCommand}" />
        </VerticalStackLayout>

        <Border Grid.Row="1" Grid.Column="0" VerticalOptions="Fill" HorizontalOptions="Fill">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="IsVisible" Value="False" />
                    <Style.Triggers>
                        <DataTrigger TargetType="Border" Binding="{Binding HasGameStarted}" Value="True">
                            <Setter Property="IsVisible" Value="True" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <Grid VerticalOptions="Fill" HorizontalOptions="Fill" BindingContext="{Binding CurrentRound}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="60" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Entry Grid.Row="0" Grid.RowSpan="7" Grid.Column="0" Text="{Binding Index}" BackgroundColor="DarkCyan" HorizontalOptions="Center" VerticalOptions="Fill" FontSize="30" FontAttributes="Bold" />

                <Entry Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="7" Margin="2" IsReadOnly="True" Text="Starting Team" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />

                <Entry Grid.Row="2" Grid.Column="1" Margin="2" IsReadOnly="True" Text="Player" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="2" Grid.Column="2" Margin="2" IsReadOnly="True" Text="Bonus" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="2" Grid.Column="3" Margin="2" IsReadOnly="True" Text="Partner" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="2" Grid.Column="4" Margin="2" IsReadOnly="True" Text="Bonus" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="2" Grid.Column="5" Margin="2" IsReadOnly="True" Text="Top" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="2" Grid.Column="6" Margin="2" IsReadOnly="True" Text="Bottom" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="2" Grid.Column="7" Margin="2" IsReadOnly="True" Text="Score" BackgroundColor="LightBlue" HorizontalTextAlignment="Center" />

                <Entry Grid.Row="3" Grid.Column="1" Margin="2" IsReadOnly="True" Text="{Binding StartingPlayer, Mode=OneWay}" />
                <Switch Grid.Row="3" Grid.Column="2" Margin="2" IsToggled="{Binding StartingPlayerBonus, Mode=TwoWay}" ThumbColor="LightBlue" />
                <Entry Grid.Row="3" Grid.Column="3" Margin="2" IsReadOnly="True" Text="{Binding StartingPartner, Mode=OneWay}" />
                <Switch Grid.Row="3" Grid.Column="4" Margin="2" IsToggled="{Binding StartingPartnerBonus, Mode=TwoWay}" ThumbColor="LightBlue" />
                <Entry Grid.Row="3" Grid.Column="5" Margin="2" ReturnType="Next" Keyboard="Numeric" Text="{Binding StartingTeam.TopScore, Mode=TwoWay}" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="3" Grid.Column="6" Margin="2" ReturnType="Next" Keyboard="Numeric" Text="{Binding StartingTeam.BottomScore, Mode=TwoWay}" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="3" Grid.Column="7" Margin="2" IsReadOnly="True" Text="{Binding StartingTeam.Score, Mode=OneWay}" HorizontalTextAlignment="Center" />

                <Entry Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="7" Margin="2" IsReadOnly="True" Text="Opposing Team" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />

                <Entry Grid.Row="5" Grid.Column="1" Margin="2" IsReadOnly="True" Text="Player" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="5" Grid.Column="2" Margin="2" IsReadOnly="True" Text="Bonus" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="5" Grid.Column="3" Margin="2" IsReadOnly="True" Text="Partner" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="5" Grid.Column="4" Margin="2" IsReadOnly="True" Text="Bonus" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="5" Grid.Column="5" Margin="2" IsReadOnly="True" Text="Top" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="5" Grid.Column="6" Margin="2" IsReadOnly="True" Text="Bottom" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="5" Grid.Column="7" Margin="2" IsReadOnly="True" Text="Score" BackgroundColor="AliceBlue" HorizontalTextAlignment="Center" />

                <Entry Grid.Row="6" Grid.Column="1" Margin="2" IsReadOnly="True" Text="{Binding OpposingPlayer, Mode=OneWay}" />
                <Switch Grid.Row="6" Grid.Column="2" Margin="2" IsToggled="{Binding OpposingPlayerBonus, Mode=TwoWay}" ThumbColor="AliceBlue" />
                <Entry Grid.Row="6" Grid.Column="3" Margin="2" IsReadOnly="True" Text="{Binding OpposingPartner, Mode=OneWay}" />
                <Switch Grid.Row="6" Grid.Column="4" Margin="2" IsToggled="{Binding OpposingPartnerBonus, Mode=TwoWay}" ThumbColor="AliceBlue" />
                <Entry Grid.Row="6" Grid.Column="5" Margin="2" ReturnType="Next" Keyboard="Numeric" Text="{Binding OpposingTeam.TopScore, Mode=TwoWay}" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="6" Grid.Column="6" Margin="2" ReturnType="Next" Keyboard="Numeric" Text="{Binding OpposingTeam.BottomScore, Mode=TwoWay}" HorizontalTextAlignment="Center" />
                <Entry Grid.Row="6" Grid.Column="7" Margin="2" IsReadOnly="True" Text="{Binding OpposingTeam.Score, Mode=OneWay}" HorizontalTextAlignment="Center" />
            </Grid>
        </Border>

        <Border Grid.Row="1" Grid.Column="1" Stroke="Black" HorizontalOptions="Fill" VerticalOptions="Fill" WidthRequest="200">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="IsVisible" Value="False" />
                    <Style.Triggers>
                        <DataTrigger TargetType="Border" Binding="{Binding HasGameStarted}" Value="True">
                            <Setter Property="IsVisible" Value="True" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <ListView ItemsSource="{Binding PlayerScores}" WidthRequest="200" BackgroundColor="LightGray">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Entry Grid.Column="0" Text="{Binding Player.FirstName}" HorizontalOptions="Center" VerticalOptions="Center" />
                                <Entry Grid.Column="1" Text="{Binding Score}" HorizontalOptions="Center" VerticalOptions="Center" />
                            </Grid>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>

        <HorizontalStackLayout Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
            <HorizontalStackLayout.Style>
                <Style TargetType="HorizontalStackLayout">
                    <Setter Property="IsVisible" Value="False" />
                    <Style.Triggers>
                        <DataTrigger TargetType="HorizontalStackLayout" Binding="{Binding HasGameStarted}" Value="True">
                            <Setter Property="IsVisible" Value="True" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </HorizontalStackLayout.Style>
            <Button Text="Previous" HorizontalOptions="Center" Command="{Binding PreviousRoundCommand}" />
            <Button Text="Next" HorizontalOptions="Center" Command="{Binding NextRoundCommand}" />
        </HorizontalStackLayout>
    </Grid>

</ContentPage>